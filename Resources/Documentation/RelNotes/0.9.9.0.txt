AlarmWorkflow v0.9.9.0 Release Notes
====================================

Änderungen seit v0.9.8.0
------------------------

Generelles

  * Wichtig: Ab einschließlich dieser Version unterstützt AlarmWorkflow nur Windows 7 SP1 und höher (.Net Framework 4.6)!
  * Die Text-Datenbankspalten sind nun nicht mehr limitiert auf eine maximale Anzahl Zeichen. Bitte Anhang #1 beachten.
  * Der Ausdruck "(no value)" wird nicht mehr ausgegeben, wenn in einem Fahrzeugeintrag ein Wert nicht gefunden wurde.
  * Es gibt nun eine globale Black/Whitelist, die für alle Alarmquellen (Fax, E-Mail, SMS) gilt.
    Vor dem Aufspielen der neuen Version bitte ggf. die alten Werte sichern.
  * Zu den vorhandenen Push Diensten ist Pushalot hinzugekommen. -> https://pushalot.com/
  * Einsatzinformationen - Export schreibt die Koordinaten nun in das richtige Feld.
  * ConfEd: Im Adressbuch sind die Einträge nun nach Nachname/Vorname sortiert.
  * Als benutzerdefinierte Objektausdrücke sind nun auch Skripte in JavaScript möglich, siehe Anhang #2.
  * Die Faxauswertung erkennt nun auch PDF-Dateien.
  * DispatchTool unterstützt nun das Quittieren empfangener Alarme.
  * Koordinaten werden intern mit einem besser geeigneten Datentyp verarbeitet

Mail Alarmquelle:
  * Verwendet neue Library MailKit

Anhänge
-------

#1
--

Bitte dieses SQL-Skript auf der Datenbank ausführen.

Wichtige Information! Dieses Skript führt die folgenden Operationen durch:
- Änderung der Textspalten auf unbegrenzte Länge, damit auch sehr lange Texte durchgehend unterstützt werden können.
- Änderung der Charsets auf UTF8, da öfters Unicode-Zeichen eingefügt werden, welche vorher nicht immer eingefügt werden konnten.

Es empfiehlt sich, *vor* dem Ausführen dieses Skripts die Datenbank zu sichern und diese im Fehlerfall wiederherzustellen.

  USE `alarmworkflow`;
  
  ALTER TABLE `operation` MODIFY `operationnumber` LONGTEXT;
  ALTER TABLE `operation` MODIFY `messenger` LONGTEXT;
  ALTER TABLE `operation` MODIFY `comment` LONGTEXT;
  ALTER TABLE `operation` MODIFY `plan` LONGTEXT;
  ALTER TABLE `operation` MODIFY `picture` LONGTEXT;
  ALTER TABLE `operation` MODIFY `priority` LONGTEXT;
  ALTER TABLE `operation` MODIFY `einsatzortstreet` LONGTEXT;
  ALTER TABLE `operation` MODIFY `einsatzortstreetnumber` LONGTEXT;
  ALTER TABLE `operation` MODIFY `einsatzortzipcode` LONGTEXT;
  ALTER TABLE `operation` MODIFY `einsatzortcity` LONGTEXT;
  ALTER TABLE `operation` MODIFY `einsatzortintersection` LONGTEXT;
  ALTER TABLE `operation` MODIFY `einsatzortlocation` LONGTEXT;
  ALTER TABLE `operation` MODIFY `einsatzortproperty` LONGTEXT;
  ALTER TABLE `operation` MODIFY `einsatzortlatlng` LONGTEXT;
  ALTER TABLE `operation` MODIFY `zielortstreet` LONGTEXT;
  ALTER TABLE `operation` MODIFY `zielortstreetnumber` LONGTEXT;
  ALTER TABLE `operation` MODIFY `zielortzipcode` LONGTEXT;
  ALTER TABLE `operation` MODIFY `zielortcity` LONGTEXT;
  ALTER TABLE `operation` MODIFY `zielortintersection` LONGTEXT;
  ALTER TABLE `operation` MODIFY `zielortlocation` LONGTEXT;
  ALTER TABLE `operation` MODIFY `zielortproperty` LONGTEXT;
  ALTER TABLE `operation` MODIFY `zielortlatlng` LONGTEXT;
  ALTER TABLE `operation` MODIFY `keyword` LONGTEXT;
  ALTER TABLE `operation` MODIFY `keywordmisc` LONGTEXT;
  ALTER TABLE `operation` MODIFY `keywordb` LONGTEXT;
  ALTER TABLE `operation` MODIFY `keywordr` LONGTEXT;
  ALTER TABLE `operation` MODIFY `keywords` LONGTEXT;
  ALTER TABLE `operation` MODIFY `keywordt` LONGTEXT;
  ALTER TABLE `operation` MODIFY `loopscsv` LONGTEXT;
  
  ALTER TABLE `operationresource` MODIFY `timestamp` LONGTEXT;
  ALTER TABLE `operationresource` MODIFY `fullname` LONGTEXT;
  ALTER TABLE `operationresource` MODIFY `equipmentcsv` LONGTEXT;
  
  ALTER TABLE `usersetting` MODIFY `identifier` LONGTEXT;
  ALTER TABLE `usersetting` MODIFY `name` LONGTEXT;
  
  ALTER TABLE `dispresource` MODIFY `emkresourceid` LONGTEXT;
  
  -- Set unicode for all database objects
  ALTER SCHEMA `alarmworkflow` DEFAULT CHARACTER SET utf8mb4 DEFAULT COLLATE utf8mb4_unicode_ci;
  
  ALTER TABLE `operation` CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
  ALTER TABLE `operationresource` CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
  ALTER TABLE `usersetting` CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
  ALTER TABLE `dispresource` CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

#2
--

  Zum Verwenden eines JavaScript-Skripts folgende Syntax verwenden:
  
    {$js=pfad\zur\skriptdatei.js}
  
  Die Skriptdatei an sich ist beispielsweise folgendermaßen aufgebaut:
  
    /* See below an example of a JavaScript script file.
     */
    function getResult(graph) {
        return graph.Einsatzort.ZipCode;
    }
    
    /* The global 'G' variable contains the 'graph' object which is to be formatted.
     * When the script file concludes, the completion value is returned.
     * You don't need to 'return' anything by yourself.
     */
    getResult(G);
  
  Bei Fragen zur Syntax von JavaScript bitte die bekannten Suchmaschinen oder z. B. StackOverflow.com befragen.
